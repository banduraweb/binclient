(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{187:function(e,t,a){e.exports=a(326)},192:function(e,t,a){},326:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(46),l=a.n(c),o=(a(192),a(35)),i=(a(193),a(40)),s=a(16),u=a.n(s),p=a(23),m=a(17),d=function(){var e=Object(n.useState)(!1),t=Object(m.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(!1),l=Object(m.a)(c,2),o=l[0],i=l[1];return{loading:a,request:Object(n.useCallback)(function(){var e=Object(p.a)(u.a.mark((function e(t){var a,n,c,l,o,s=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>1&&void 0!==s[1]?s[1]:"GET",n=s.length>2&&void 0!==s[2]?s[2]:null,c=s.length>3&&void 0!==s[3]?s[3]:{},r(!0),e.prev=4,n&&(n=JSON.stringify(n),c["Content-Type"]="application/json"),e.next=8,fetch(t,{method:a,body:n,headers:c});case 8:return l=e.sent,e.next=11,l.json();case 11:if(o=e.sent,l.ok){e.next=14;break}throw new Error(o.message||"Error fetching");case 14:return r(!1),e.abrupt("return",o);case 18:throw e.prev=18,e.t0=e.catch(4),r(!1),i(e.t0.message),e.t0;case 23:case"end":return e.stop()}}),e,null,[[4,18]])})));return function(t){return e.apply(this,arguments)}}(),[]),error:o,clearError:Object(n.useCallback)((function(){return i(null)}),[])}},f=Object(n.createContext)({token:null,userId:null,login:function(){},logout:function(){},isAuth:!1}),b=a(346),g=a(341),h=a(336),E=function(){return r.a.createElement("div",null,r.a.createElement(b.a,{style:{position:"absolute",width:"100vw",height:"100vh"}},r.a.createElement(g.a,{active:!0},r.a.createElement(h.a,{size:"massive"},"Loading"))))},v=a(344),O=a(340),j=a(49),k=a(328),x=a(342),C=function(e){var t=e.historyRecipe,a=Object(n.useState)([]),c=Object(m.a)(a,2),l=c[0],o=c[1];return r.a.createElement("div",null,r.a.createElement(k.a,{style:{backgroundColor:"#b0d3bf"},onClick:function(){return o(t)},floated:"right"},"See prev versions"),l.length>0&&l.map((function(e){var t=e.un_id,a=e.title,n=e.calories,c=e.ingredients,l=e.preparation;return r.a.createElement(x.a,{key:t,style:{border:"1px solid #f3f3f3",boxShadow:"0 0 8px 0 #e0e0e0",backgroundColor:"#FFCC66"}},r.a.createElement(x.a.Header,null,r.a.createElement("i",{className:"fas fa-utensil-spoon"},"Recipe"),"\u2003 ",a,r.a.createElement("br",null),r.a.createElement("i",{className:"fas fa-hamburger"},"calories")," \u2003",n),r.a.createElement(x.a.List,null,r.a.createElement(x.a.Item,null,r.a.createElement(j.a,{name:"food"}),"Ingredients: \u2003",c),r.a.createElement(x.a.Item,null,r.a.createElement(j.a,{name:"american sign language interpreting"}),"Preparation: \u2003 ",l)))})),l.length>0&&r.a.createElement(k.a,{style:{backgroundColor:"#b0d3bf"},onClick:function(){o([])},floated:"right"},"Close previous version"))},w=function(e){var t=e.recipes,a=Object(i.g)(),c=Object(n.useState)(t),l=Object(m.a)(c,2),o=l[0],s=l[1];Object(n.useEffect)((function(){s(t)}),[t]);var b=d(),g=b.loading,h=b.request,x=Object(n.useContext)(f).token,w=Object(n.useCallback)(function(){var e=Object(p.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h("https://infinite-springs-97858.herokuapp.com/recipe/delete".concat(t),"DELETE",null,{Authorization:"Bearer ".concat(x)});case 3:e.sent&&s(o.filter((function(e){return e._id!==t}))),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),[x,h,o]);return g?r.a.createElement(E,null):r.a.createElement(v.a,{className:"container"},r.a.createElement(v.a.Row,null,o.map((function(e){var t=e.__history,n=e._id,c=e.title,l=e.calories,o=e.ingredients,i=e.preparation;return r.a.createElement(v.a.Column,{width:16,key:n,style:{border:"1px solid #f3f3f3",boxShadow:"0 0 8px 0 #e0e0e0",margin:"10px 0",backgroundColor:"#FFFFCC",padding:"10px"}},r.a.createElement(O.a,null,r.a.createElement(O.a.Content,{verticalAlign:"middle"},r.a.createElement(O.a.Header,null,r.a.createElement("i",{className:"fas fa-utensil-spoon"},"Recipe"),"\u2003",c,r.a.createElement("br",null),r.a.createElement("i",{className:"fas fa-hamburger"},"Calories")," \u2003"," ",l),r.a.createElement(O.a.Description,null,r.a.createElement(j.a,{name:"food"}),"Ingredients: \u2003 ",o),r.a.createElement(O.a.Description,null,r.a.createElement(j.a,{name:"american sign language interpreting"}),"Preparation: \u2003",i),r.a.createElement(O.a.Extra,null,r.a.createElement(k.a,{style:{backgroundColor:"#fecdc7"},floated:"right",onClick:function(){return w(n)}},"Remove")),r.a.createElement(O.a.Extra,null,r.a.createElement(k.a,{style:{backgroundColor:"#bbdb93"},onClick:function(){a.push("/".concat(n))},floated:"right"},"Edit")))),t.length>0&&r.a.createElement("div",{style:{margin:"80px 0"}},r.a.createElement(C,{historyRecipe:t,id:n})))}))))},y=function(){var e=Object(n.useState)([]),t=Object(m.a)(e,2),a=t[0],c=t[1],l=d(),o=l.loading,i=l.request,s=Object(n.useContext)(f).token,b=Object(n.useCallback)(Object(p.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i("https://infinite-springs-97858.herokuapp.com/recipe/","GET",null,{Authorization:"Bearer ".concat(s)});case 3:t=e.sent,c(t),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])}))),[s,i]);return Object(n.useEffect)((function(){b()}),[b]),o?r.a.createElement(E,null):r.a.createElement(r.a.Fragment,null,!o&&r.a.createElement(w,{recipes:a}))},S=a(22),F=a(30),I=a(339),T=a(337),N=a(338),P=function(){var e=Object(i.g)(),t=Object(n.useContext)(f),a=d().request,c=Object(n.useState)({title:"",calories:"",ingredients:"",preparation:""}),l=Object(m.a)(c,2),o=l[0],s=l[1],b=function(e){s(Object(F.a)({},o,Object(S.a)({},e.target.name,e.target.value)))},g=function(){var n=Object(p.a)(u.a.mark((function n(){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,a("https://infinite-springs-97858.herokuapp.com/recipe/add","POST",Object(F.a)({},o),{Authorization:"Bearer ".concat(t.token)});case 3:n.sent,e.push("/recipes"),n.next=9;break;case 7:n.prev=7,n.t0=n.catch(0);case 9:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(){return n.apply(this,arguments)}}();return r.a.createElement(I.a,{className:"container"},r.a.createElement(I.a.Group,{widths:"equal"},r.a.createElement(I.a.Field,{id:"form-input-control-first-name",control:T.a,label:"Title",placeholder:"Title",name:"title",onChange:b}),r.a.createElement(I.a.Field,{id:"form-input-control-last-name",control:T.a,label:"Calories",placeholder:"calories",type:"number",name:"calories",onChange:b})),r.a.createElement(I.a.Field,{id:"form-textarea-control-ingredients",control:N.a,label:"Ingredients",placeholder:"ingredients",name:"ingredients",onChange:b}),r.a.createElement(I.a.Field,{id:"form-textarea-control-preparation",control:N.a,label:"Preparation",placeholder:"preparation",name:"preparation",onChange:b}),r.a.createElement(I.a.Field,{id:"form-button-control-public",control:k.a,content:"Confirm",label:"Label with htmlFor",onClick:g}))},A=function(){var e=Object(i.g)(),t=Object(i.h)().id,a=Object(n.useContext)(f).token,c=d().request,l=Object(n.useState)({title:"",calories:"",ingredients:"",preparation:""}),o=Object(m.a)(l,2),s=o[0],b=o[1],g=Object(n.useCallback)(Object(p.a)(u.a.mark((function e(){var n,r,l,o,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c("https://infinite-springs-97858.herokuapp.com/recipe/".concat(t),"GET",null,{Authorization:"Bearer ".concat(a)});case 3:n=e.sent,r=n.title,l=n.calories,o=n.ingredients,i=n.preparation,b({title:r,calories:l,ingredients:o,preparation:i}),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])}))),[a,c,t]);Object(n.useEffect)((function(){g()}),[g]);var h=function(e){b(Object(F.a)({},s,Object(S.a)({},e.target.name,e.target.value)))},E=function(){var n=Object(p.a)(u.a.mark((function n(){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,c("https://infinite-springs-97858.herokuapp.com/recipe/update".concat(t),"POST",Object(F.a)({},s),{Authorization:"Bearer ".concat(a)});case 3:n.sent,e.push("/recipes"),n.next=9;break;case 7:n.prev=7,n.t0=n.catch(0);case 9:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(){return n.apply(this,arguments)}}();return r.a.createElement(I.a,{className:"container"},r.a.createElement(I.a.Group,{widths:"equal"},r.a.createElement(I.a.Field,{id:"form-input-control-first-name",control:T.a,label:"Title",placeholder:"Title",name:"title",value:s.title,onChange:h}),r.a.createElement(I.a.Field,{id:"form-input-control-last-name",control:T.a,label:"Calories",placeholder:"calories",type:"number",name:"calories",value:s.calories,onChange:h})),r.a.createElement(I.a.Field,{id:"form-textarea-control-ingredients",control:N.a,label:"Ingredients",placeholder:"ingredients",name:"ingredients",value:s.ingredients,onChange:h}),r.a.createElement(I.a.Field,{id:"form-textarea-control-preparation",control:N.a,label:"Preparation",placeholder:"preparation",name:"preparation",value:s.preparation,onChange:h}),r.a.createElement(I.a.Field,{id:"form-button-control-public",control:k.a,content:"Update",label:"Label with htmlFor",onClick:E}))},z=a(345),q=a(176),L=function(){var e=Object(n.useContext)(f),t=d(),a=t.loading,c=t.request,l=t.error,o=t.clearError,i=Object(n.useState)({email:"",password:""}),s=Object(m.a)(i,2),g=s[0],h=s[1],E=Object(n.useState)(null),O=Object(m.a)(E,2),j=O[0],C=O[1],w=function(e){h(Object(F.a)({},g,Object(S.a)({},e.target.name,e.target.value)))},y=function(){var e=Object(p.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c("https://infinite-springs-97858.herokuapp.com/auth/registration","POST",Object(F.a)({},g));case 3:t=e.sent,C(t.message),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),T=function(){var t=Object(p.a)(u.a.mark((function t(){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c("https://infinite-springs-97858.herokuapp.com/auth/login","POST",Object(F.a)({},g));case 3:a=t.sent,e.login(a.token,a.userId),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();return console.log(l,"error"),r.a.createElement("div",null,r.a.createElement(v.a,{textAlign:"center",style:{height:"100vh"},verticalAlign:"middle"},r.a.createElement(v.a.Column,{style:{maxWidth:450}},r.a.createElement(z.a,{as:"h2",color:"teal",textAlign:"center"},r.a.createElement(q.a,{src:"./img/10250.jpg"})," Log-in to your account"),r.a.createElement(I.a,{size:"large"},r.a.createElement(b.a,{stacked:!0},r.a.createElement(I.a.Input,{fluid:!0,icon:"user",iconPosition:"left",placeholder:"E-mail address",name:"email",onChange:w,onFocus:o,error:l&&l.includes("email")?{content:"not valid email",pointing:"left"}:null}),r.a.createElement(I.a.Input,{fluid:!0,icon:"lock",iconPosition:"left",placeholder:"Password",type:"password",name:"password",onChange:w,onFocus:o,error:l&&l.includes("password")?{content:"not valid password",pointing:"left"}:null}),r.a.createElement(k.a,{color:"teal",fluid:!0,size:"large",style:{margin:"5px 0"},disabled:a||!!l,onClick:T},"Login"),r.a.createElement(k.a,{color:"teal",fluid:!0,size:"large",disabled:a||!!l,onClick:y},"Register"))),l&&r.a.createElement(x.a,{style:{background:"#fff6f6",color:"#9f3a38"}},l),j&&r.a.createElement(x.a,{style:{background:"#fff",color:"#00b5ad"}},j))))},B=a(343),D=function(){var e=Object(n.useContext)(f),t=Object(i.g)();return r.a.createElement(B.a,{className:"container"},r.a.createElement(B.a.Item,{header:!0},r.a.createElement("img",{style:{width:"60px"},src:"./img/10250.jpg",alt:""})),r.a.createElement(B.a.Item,null,r.a.createElement(o.b,{to:"/create"},"Create")),r.a.createElement(B.a.Item,null,r.a.createElement(o.b,{to:"/recipes"},"My recipes")),r.a.createElement(B.a.Item,{position:"right"},r.a.createElement("a",{href:"/",onClick:function(a){a.preventDefault(),e.logout(),t.push("/")}}," ","Log out")))};var R=function(){var e=function(){var e=Object(n.useState)(null),t=Object(m.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(!1),l=Object(m.a)(c,2),o=l[0],i=l[1],s=Object(n.useState)(null),u=Object(m.a)(s,2),p=u[0],d=u[1],f=Object(n.useCallback)((function(e,t){r(e),d(t),localStorage.setItem("userData",JSON.stringify({userId:t,token:e}))}),[]),b=Object(n.useCallback)((function(){r(null),d(null),localStorage.removeItem("userData")}),[]);return Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));e&&e.token&&f(e.token,e.userId),i(!0)}),[f]),{login:f,logout:b,token:a,userId:p,authFinished:o}}(),t=e.login,a=e.logout,c=e.token,l=e.userId,s=e.authFinished,u=Boolean(c),p=u?r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/recipes",exact:!0},r.a.createElement(y,null)),r.a.createElement(i.b,{path:"/create",exact:!0},r.a.createElement(P,null)),r.a.createElement(i.b,{path:"/:id",exact:!0},r.a.createElement(A,null)),r.a.createElement(i.a,{to:"/create"})):r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/",exact:!0},r.a.createElement(L,null)),r.a.createElement(i.a,{to:"/"}));return s?r.a.createElement(f.Provider,{value:{login:t,logout:a,token:c,userId:l,isAuthUser:u}},r.a.createElement(o.a,null,u&&r.a.createElement(D,null),r.a.createElement("div",{className:"container"},p))):r.a.createElement(E,null)};l.a.render(r.a.createElement(R,null),document.getElementById("root"))}},[[187,1,2]]]);
//# sourceMappingURL=main.490a526b.chunk.js.map